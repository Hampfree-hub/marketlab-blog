---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
import ThemeToggle from './ThemeToggle.astro';

// BASE_URL уже содержит '/marketlab-academy', добавляем '/' перед logo.svg
const baseUrl = import.meta.env.BASE_URL.endsWith('/') 
	? import.meta.env.BASE_URL 
	: import.meta.env.BASE_URL + '/';
const logoPath = `${baseUrl}logo.svg?v=5`;
---

<header>
	<nav>
		<h2><a href="/" class="logo-link">
			<img src={logoPath} alt="MarketLab Academy" class="logo-img" />
		</a></h2>
		<div class="internal-links">
			<HeaderLink href="/blog">Блог</HeaderLink>
			<div class="dropdown">
				<button class="dropdown-button" aria-expanded="false" aria-haspopup="true">
					Категории
					<svg width="12" height="12" viewBox="0 0 12 12" fill="none" aria-hidden="true">
						<path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
					</svg>
				</button>
				<div class="dropdown-menu">
					<a href="/blog?category=trading">Трейдинг</a>
					<a href="/blog?category=crypto">Криптовалюта</a>
					<a href="/blog?category=automation">Автоматизация</a>
					<a href="/blog?category=strategies">Стратегии</a>
				</div>
			</div>
			<HeaderLink href="/about">О проекте</HeaderLink>
			<HeaderLink href="/rss.xml">RSS</HeaderLink>
		</div>
		<div class="header-right">
			<ThemeToggle />
			<div class="language-switcher">
				<button class="lang-button active" aria-label="Русский">RU</button>
				<button class="lang-button" aria-label="English">EN</button>
				<button class="lang-button" aria-label="Español">ES</button>
			</div>
			<div class="social-links">
				<a href="https://dzen.ru/hampfree_algo_trading" target="_blank" rel="noopener noreferrer" class="social-button" data-label="Дзен" aria-label="Дзен">
					<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<!-- Дзен - буква D -->
						<text x="12" y="17" font-size="14" font-weight="900" text-anchor="middle" fill="currentColor" font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif">D</text>
					</svg>
					<span class="social-tooltip">Дзен</span>
				</a>
				<a href="https://vk.com/hampfree_market_lab" target="_blank" rel="noopener noreferrer" class="social-button" data-label="VK" aria-label="VK">
					<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<!-- VK - буквы VK -->
						<text x="12" y="17" font-size="12" font-weight="900" text-anchor="middle" fill="currentColor" font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif">VK</text>
					</svg>
					<span class="social-tooltip">VK</span>
				</a>
				<a href="https://finbazar.ru/profile/Hampfree" target="_blank" rel="noopener noreferrer" class="social-button" data-label="Bazar" aria-label="Bazar">
					<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
						<!-- Bazar - буква B -->
						<text x="12" y="17" font-size="14" font-weight="900" text-anchor="middle" fill="currentColor" font-family="system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif">B</text>
					</svg>
					<span class="social-tooltip">Bazar</span>
				</a>
			</div>
		</div>
	</nav>
</header>

<style>
	header {
		margin: 0;
		padding: 0 1em;
		background: var(--bg-primary);
		box-shadow: var(--box-shadow);
		position: sticky;
		top: 0;
		z-index: 1000;
		transition: background-color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)), 
		            box-shadow var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)),
		            color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
	}
	h2 {
		margin: 0;
		font-size: 1em;
		display: flex;
		align-items: center;
		line-height: 1;
	}

	.logo-link {
		text-decoration: none;
		display: flex;
		align-items: center;
		line-height: 1;
		transition: color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
	}

	.logo-img {
		width: 40px;
		height: 40px;
		min-width: 40px;
		min-height: 40px;
		border: none !important;
		border-radius: 0;
		outline: none !important;
		box-shadow: none !important;
		transition: transform var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)), filter var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
		display: block;
		object-fit: contain;
		flex-shrink: 0;
		background: transparent;
	}
	
	.logo-link:focus .logo-img,
	.logo-img:focus {
		outline: none !important;
		box-shadow: none !important;
		border: none !important;
	}

	.logo-link:hover .logo-img {
		transform: scale(1.05);
		filter: brightness(1.1);
	}
	
	nav {
		display: flex;
		align-items: center; /* Выравнивание по центру по вертикали */
		justify-content: space-between;
		gap: 1.5em;
		flex-wrap: wrap;
	}
	nav a {
		padding: 1em 0.5em;
		color: var(--text-primary);
		border-bottom: 4px solid transparent;
		text-decoration: none;
		transition: color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)), 
		            border-color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
	}
	
	nav a:hover {
		color: var(--green-primary, var(--accent));
	}
	
	nav a.active {
		text-decoration: none;
		border-bottom-color: var(--green-primary, var(--accent));
		color: var(--green-primary, var(--accent));
	}

	.internal-links {
		display: flex;
		align-items: center;
		gap: 0.5em;
		flex-wrap: wrap;
		flex: 1;
		min-width: 0;
	}

	/* Dropdown меню */
	.dropdown {
		position: relative;
	}

	.dropdown-button {
		display: flex;
		align-items: center;
		gap: 0.25em;
		padding: 1em 0.5em;
		background: transparent;
		border: none;
		border-bottom: 4px solid transparent;
		color: var(--text-primary);
		cursor: pointer;
		font-size: 1em;
		font-family: 'Lato', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
		transition: color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)), 
		            border-color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
		line-height: 1;
		height: 100%;
	}

	.dropdown-button:hover {
		color: var(--green-primary, var(--accent));
	}

	.dropdown-button svg {
		transition: transform var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
	}

	.dropdown:hover .dropdown-button svg,
	.dropdown-button[aria-expanded="true"] ~ .dropdown-menu svg {
		transform: rotate(180deg);
	}

	.dropdown-menu {
		position: absolute;
		top: 100%;
		left: 0;
		background: var(--bg-primary);
		border-radius: 8px;
		box-shadow: var(--box-shadow);
		min-width: 180px;
		opacity: 0;
		visibility: hidden;
		transform: translateY(-10px);
		transition: opacity var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)), 
		            visibility var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)), 
		            transform var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)),
		            background-color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)),
		            border-color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)),
		            box-shadow var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
		z-index: 100;
		margin-top: 0.5em;
	}

	.dropdown:hover .dropdown-menu {
		opacity: 1;
		visibility: visible;
		transform: translateY(0);
	}

	.dropdown-menu a {
		display: block;
		padding: 0.75em 1em;
		color: var(--text-primary);
		text-decoration: none;
		border-bottom: 1px solid var(--bg-secondary);
		transition: color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)), 
		            background-color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)),
		            border-color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
		transform: translateY(0);
	}

	/* Скругление углов для первого элемента */
	.dropdown-menu a:first-child {
		border-top-left-radius: 8px;
		border-top-right-radius: 8px;
	}

	/* Скругление углов для последнего элемента */
	.dropdown-menu a:last-child {
		border-bottom: none;
		border-bottom-left-radius: 8px;
		border-bottom-right-radius: 8px;
	}

	.dropdown-menu a:hover {
		background: var(--bg-secondary);
		color: var(--green-primary, var(--accent));
		border-bottom-color: transparent;
	}

	.header-right {
		display: flex;
		align-items: center;
		gap: 0.75em;
		flex-shrink: 0;
		line-height: 1;
	}
	
	/* Переключатель темы */
	:global(.theme-toggle) {
		flex-shrink: 0;
	}

	.language-switcher {
		display: flex;
		gap: 0;
		background: transparent;
		border-radius: 4px;
		padding: 0;
	}

	.lang-button {
		padding: 0.25em 0.5em;
		background: transparent;
		border: none;
		border-radius: 0;
		color: var(--text-secondary);
		font-size: 0.75em;
		font-weight: 400;
		cursor: pointer;
		transition: color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
		font-family: 'Lato', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
		position: relative;
	}

	.lang-button:not(:last-child)::after {
		content: '';
		position: absolute;
		right: 0;
		top: 50%;
		transform: translateY(-50%);
		width: 1px;
		height: 60%;
		background: rgba(122, 122, 122, 0.2);
	}

	.lang-button:hover {
		color: var(--green-primary, var(--accent));
	}

	.lang-button.active {
		color: var(--accent);
		font-weight: 600;
	}

	.social-links {
		display: flex;
		gap: 0.75em;
		align-items: center;
	}
	
	.social-button {
		width: 28px !important;
		height: 28px !important;
		min-width: 28px !important;
		min-height: 28px !important;
		max-width: 28px !important;
		max-height: 28px !important;
		border-radius: 50% !important;
		display: flex !important;
		align-items: center;
		justify-content: center;
		position: relative;
		transition: background var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)),
		            border-color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)),
		            color var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)),
		            transform var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)),
		            box-shadow var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
		text-decoration: none !important;
		flex-shrink: 0;
		box-sizing: border-box;
		padding: 0 !important;
		margin: 0 !important;
		box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
		overflow: hidden;
		aspect-ratio: 1 / 1 !important;
	}
	
	/* Защита от глобальных стилей для ссылок */
	.social-button,
	.social-button:hover,
	.social-button:focus,
	.social-button:active {
		text-decoration: none !important;
		color: inherit !important;
	}
	
	/* Светлая тема - более тёмная тень для кнопок */
	.light-theme .social-button {
		box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12);
	}
	
	/* Тёмная тема - более светлая тень */
	.dark-theme .social-button {
		box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
	}
	
	.social-button svg {
		width: 16px;
		height: 16px;
		min-width: 16px;
		min-height: 16px;
		max-width: 16px;
		max-height: 16px;
		flex-shrink: 0;
		display: block;
		vertical-align: middle;
		/* Убираем отдельную анимацию - символ движется вместе с кнопкой */
	}
	
	/* Базовые стили для всех кнопок соцсетей (светлая тема по умолчанию) */
	/* Дзен - едва заметный серый с обводкой */
	.social-button[href*="dzen"] {
		background: rgba(74, 74, 74, 0.08); /* Едва заметный серый фон */
		border: 1px solid rgba(74, 74, 74, 0.25); /* Слабая серая обводка */
		color: #4A4A4A; /* Серый текст */
	}
	
	.social-button[href*="dzen"] svg text {
		fill: currentColor; /* Использует color кнопки */
		transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
	}
	
	/* VK - едва заметный синий с обводкой */
	.social-button[href*="vk"] {
		background: rgba(70, 128, 194, 0.08); /* Едва заметный синий фон */
		border: 1px solid rgba(70, 128, 194, 0.3); /* Слабая синяя обводка */
		color: rgba(70, 128, 194, 0.9); /* Синий текст */
	}
	
	.social-button[href*="vk"] svg text {
		fill: currentColor; /* Использует color кнопки */
		transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
	}
	
	/* Bazar - едва заметный зелёный с обводкой */
	.social-button[href*="finbazar"] {
		background: rgba(74, 154, 74, 0.08); /* Едва заметный зелёный фон */
		border: 1px solid rgba(74, 154, 74, 0.3); /* Слабая зелёная обводка */
		color: rgba(74, 154, 74, 0.9); /* Зелёный текст */
	}
	
	.social-button[href*="finbazar"] svg text {
		fill: currentColor; /* Использует color кнопки */
		transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
	}
	
	/* Тёмная тема (автоматическая) - более яркие цвета */
	@media (prefers-color-scheme: dark) {
		:root:not(.light-theme) .social-button[href*="dzen"] {
			background: rgba(255, 255, 255, 0.15) !important; /* Светлый фон для тёмной темы */
			border: 1px solid rgba(255, 255, 255, 0.3) !important;
			color: #E0E0E0 !important; /* Светлый текст */
		}
		
		:root:not(.light-theme) .social-button[href*="dzen"] svg text {
			fill: #E0E0E0 !important;
			transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)) !important;
		}
		
		:root:not(.light-theme) .social-button[href*="vk"] {
			background: rgba(70, 128, 194, 0.8);
			border: 1px solid rgba(70, 128, 194, 0.6);
			color: #FFFFFF;
		}
		
		:root:not(.light-theme) .social-button[href*="vk"] svg text {
			fill: #FFFFFF;
			transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
		}
		
		:root:not(.light-theme) .social-button[href*="finbazar"] {
			background: rgba(107, 200, 107, 0.8);
			border: 1px solid rgba(107, 200, 107, 0.6);
			color: #FFFFFF;
		}
		
		:root:not(.light-theme) .social-button[href*="finbazar"] svg text {
			fill: #FFFFFF;
			transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
		}
	}
	
	/* Ручное переключение темы - тёмная */
	.dark-theme .social-button[href*="dzen"] {
		background: rgba(255, 255, 255, 0.15) !important; /* Светлый фон для тёмной темы */
		border: 1px solid rgba(255, 255, 255, 0.3) !important;
		color: #E0E0E0 !important; /* Светлый текст */
	}
	
	.dark-theme .social-button[href*="dzen"] svg text {
		fill: #E0E0E0 !important; /* Светлый текст для SVG */
		transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)) !important;
	}
	
	.dark-theme .social-button[href*="vk"] {
		background: rgba(70, 128, 194, 0.8);
		border: 1px solid rgba(70, 128, 194, 0.6);
		color: #FFFFFF;
	}
	
	.dark-theme .social-button[href*="vk"] svg text {
		fill: #FFFFFF;
		transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
	}
	
	.dark-theme .social-button[href*="finbazar"] {
		background: rgba(107, 200, 107, 0.8);
		border: 1px solid rgba(107, 200, 107, 0.6);
		color: #FFFFFF;
	}
	
	.dark-theme .social-button[href*="finbazar"] svg text {
		fill: #FFFFFF;
		transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
	}
	
	/* Светлая тема - едва заметные кнопки с обводкой */
	.light-theme .social-button[href*="dzen"] {
		background: rgba(74, 74, 74, 0.08) !important; /* Едва заметный серый фон */
		border: 1px solid rgba(74, 74, 74, 0.25) !important; /* Слабая серая обводка */
		color: #4A4A4A !important; /* Серый текст */
	}
	
	.light-theme .social-button[href*="dzen"] svg text {
		fill: #4A4A4A !important; /* Серый текст для SVG */
		transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)) !important;
	}
	
	.light-theme .social-button[href*="vk"] {
		background: rgba(70, 128, 194, 0.08) !important; /* Едва заметный синий фон */
		border: 1px solid rgba(70, 128, 194, 0.3) !important; /* Слабая синяя обводка */
		color: rgba(70, 128, 194, 0.9) !important; /* Синий текст */
	}
	
	.light-theme .social-button[href*="vk"] svg text {
		fill: rgba(70, 128, 194, 0.9) !important; /* Синий текст для SVG */
		transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)) !important;
	}
	
	.light-theme .social-button[href*="finbazar"] {
		background: rgba(74, 154, 74, 0.08) !important; /* Едва заметный зелёный фон */
		border: 1px solid rgba(74, 154, 74, 0.3) !important; /* Слабая зелёная обводка */
		color: rgba(74, 154, 74, 0.9) !important; /* Зелёный текст */
	}
	
	.light-theme .social-button[href*="finbazar"] svg text {
		fill: rgba(74, 154, 74, 0.9) !important; /* Зелёный текст для SVG */
		transition: fill var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)) !important;
	}
	
	/* Подпись при наведении */
	.social-tooltip {
		position: absolute;
		top: 100%;
		left: 50%;
		transform: translateX(-50%) translateY(8px);
		background: var(--bg-primary);
		color: var(--text-primary);
		padding: 0.35em 0.6em;
		border-radius: 6px;
		font-size: 0.7em;
		white-space: nowrap;
		opacity: 0;
		visibility: hidden;
		transition: opacity var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)), 
		            visibility var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1)), 
		            transform var(--transition-smooth, 0.4s cubic-bezier(0.4, 0, 0.2, 1));
		pointer-events: none;
		box-shadow: var(--box-shadow);
		z-index: 1000;
	}
	
	.social-tooltip::before {
		content: '';
		position: absolute;
		bottom: 100%;
		left: 50%;
		transform: translateX(-50%);
		border: 4px solid transparent;
		border-bottom-color: var(--bg-primary);
	}
	
	.social-button:hover .social-tooltip {
		opacity: 1;
		visibility: visible;
		transform: translateX(-50%) translateY(4px);
	}
	
	/* Скрываем tooltip на мобильных */
	@media (max-width: 600px) {
		.social-tooltip {
			display: none;
		}
	}
	
	/* Hover эффект - плавное увеличение, усиление цвета и тень */
	.social-button:hover {
		transform: translateY(-1px) scale(1.05);
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
	}
	
	/* Светлая тема - усиление цвета при hover */
	.light-theme .social-button[href*="dzen"]:hover {
		background: rgba(74, 74, 74, 0.25) !important; /* Усиленный серый фон */
		border-color: rgba(74, 74, 74, 0.5) !important; /* Более яркая обводка */
		color: #2A2A2A !important; /* Более тёмный текст */
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.18);
	}
	
	.light-theme .social-button[href*="dzen"]:hover svg text {
		fill: #2A2A2A !important;
	}
	
	.light-theme .social-button[href*="vk"]:hover {
		background: rgba(70, 128, 194, 0.25) !important; /* Усиленный синий фон */
		border-color: rgba(70, 128, 194, 0.6) !important; /* Более яркая обводка */
		color: rgba(70, 128, 194, 1) !important; /* Полностью непрозрачный синий */
		box-shadow: 0 2px 8px rgba(70, 128, 194, 0.2);
	}
	
	.light-theme .social-button[href*="vk"]:hover svg text {
		fill: rgba(70, 128, 194, 1) !important;
	}
	
	.light-theme .social-button[href*="finbazar"]:hover {
		background: rgba(74, 154, 74, 0.25) !important; /* Усиленный зелёный фон */
		border-color: rgba(74, 154, 74, 0.6) !important; /* Более яркая обводка */
		color: rgba(74, 154, 74, 1) !important; /* Полностью непрозрачный зелёный */
		box-shadow: 0 2px 8px rgba(74, 154, 74, 0.2);
	}
	
	.light-theme .social-button[href*="finbazar"]:hover svg text {
		fill: rgba(74, 154, 74, 1) !important;
	}
	
	/* Тёмная тема - hover эффект */
	.dark-theme .social-button:hover {
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25);
	}
	
	.dark-theme .social-button[href*="dzen"]:hover {
		background: rgba(255, 255, 255, 0.3) !important; /* Более яркий фон */
		border-color: rgba(255, 255, 255, 0.5) !important;
	}
	
	.dark-theme .social-button[href*="vk"]:hover {
		background: rgba(70, 128, 194, 0.95) !important;
		border-color: rgba(70, 128, 194, 0.8) !important;
	}
	
	.dark-theme .social-button[href*="finbazar"]:hover {
		background: rgba(107, 200, 107, 0.95) !important;
		border-color: rgba(107, 200, 107, 0.8) !important;
	}
	
	/* Символ движется вместе с кнопкой (через scale кнопки), отдельной анимации нет */

	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		white-space: nowrap;
		border-width: 0;
	}
	
	/* Промежуточные экраны (таблет) */
	@media (max-width: 1024px) {
		nav {
			gap: 1em;
		}
		
		.internal-links {
			gap: 0.4em;
		}
		
		nav a, .dropdown-button {
			padding: 0.875em 0.5em;
			font-size: 0.95em;
		}
		
		.header-right {
			gap: 0.75em;
		}
	}

	/* Мобильные и узкие экраны - просто уменьшаем размеры (как у Bybit) */
	@media (max-width: 900px) {
		header {
			padding: 0 1em;
		}
		
		/* nav остаётся горизонтальным, просто уменьшаем gap */
		nav {
			gap: 1em;
		}
		
		.logo-img {
			width: 36px;
			height: 36px;
			min-width: 36px;
			min-height: 36px;
		}
		
		/* Навигация - просто меньше размеры */
		.internal-links {
			gap: 0.4em;
		}
		
		nav a, .dropdown-button {
			padding: 0.875em 0.5em;
			font-size: 0.95em;
		}
		
		.header-right {
			gap: 0.75em;
		}

		.lang-button {
			padding: 0.25em 0.4em;
			font-size: 0.7em;
		}
		
		.social-button {
			width: 26px !important;
			height: 26px !important;
			min-width: 26px !important;
			min-height: 26px !important;
			max-width: 26px !important;
			max-height: 26px !important;
			border-radius: 50% !important;
			aspect-ratio: 1 / 1 !important;
		}
		
		.social-button svg {
			width: 14px;
			height: 14px;
			min-width: 14px;
			min-height: 14px;
			max-width: 14px;
			max-height: 14px;
		}
	}
	
	/* Очень узкие экраны - тогда только вертикализация */
	@media (max-width: 600px) {
		/* nav становится вертикальным (все элементы лесенкой) */
		nav {
			flex-direction: column;
			align-items: flex-start;
			gap: 1em;
		}
		
		.logo-link {
			margin-bottom: 0.5em;
		}
		
		/* Навигация вертикально (лесенкой) */
		.internal-links {
			flex-direction: column;
			align-items: flex-start;
			width: 100%;
			gap: 0.5em;
		}
		
		nav a, .dropdown-button {
			width: 100%;
			text-align: left;
			padding: 0.75em 0;
		}
		
		/* Языки и соцсети - вертикально друг за другом */
		.header-right {
			flex-direction: column;
			align-items: flex-start;
			width: 100%;
			gap: 0.75em;
		}

		.language-switcher {
			flex-direction: column;
			width: 100%;
			gap: 0.5em;
		}
		
		.lang-button {
			width: 100%;
			text-align: left;
			padding: 0.5em 0.75em;
		}
		
		.lang-button:not(:last-child)::after {
			display: none;
		}
		
		/* Соцсети вертикально */
		.social-links {
			flex-direction: column;
			width: 100%;
			gap: 0.5em;
		}
		
		.social-button {
			align-self: flex-start;
			width: 26px !important;
			height: 26px !important;
			min-width: 26px !important;
			min-height: 26px !important;
			max-width: 26px !important;
			max-height: 26px !important;
			border-radius: 50% !important;
			aspect-ratio: 1 / 1 !important;
		}
	}
		
		/* Показываем меню только при hover/focus на родителе */
		.dropdown:hover .dropdown-menu,
		.dropdown:focus-within .dropdown-menu {
			opacity: 1;
			visibility: visible;
			transform: translateY(0);
		}
		
		.dropdown-button {
			display: flex;
		}
		
		.header-right {
			display: flex;
		}
	}
	
	/* Очень узкие экраны */
	@media (max-width: 480px) {
		header {
			padding: 0 0.75em;
		}
		
		nav {
			gap: 0.5em;
		}
		
		.internal-links {
			gap: 0.4em;
		}
		
		nav a, .dropdown-button {
			padding: 0.65em 0;
			font-size: 0.9em;
		}
		
		.logo-img {
			width: 32px;
			height: 32px;
			min-width: 32px;
			min-height: 32px;
			border: none !important;
			outline: none !important;
			box-shadow: none !important;
		}
		
		.header-right {
			gap: 0.5em;
		}
		
		.lang-button {
			padding: 0.4em 0.6em;
		}
		
		.social-links {
			gap: 0.4em;
		}
	}
</style>
